{% include "components/new-tab/user-header.html" %}
{% load static %}{% block newtab %}

<div class="tab-content" id="accountsummary">
    <div class="flex">
        <div class="trade-download">
            <div style="transform: rotate(90deg);padding-left: 10px;">
                <p>Filter</p>
            </div>
            <span>
                <a href=""><i class="fa-solid fa-file-csv"></i></a>
            </span>
        </div>
     <div class="trades-side">
        <div class="trade-top">
            <div class="flex space-bw">
                <div>
                    <p>Filter</p>
                </div>
                <div class="closeBtn">
                    <i class="fa-solid fa-xmark"></i>
                </div>
            </div>
        </div>
        <form method="get">
            {% csrf_token %}
            <div class="trade-btm">
                <div class="flex space-bw">
                    <label for="">From:</label>
                    <input name="from_date" type="date" class="form_control">
                </div>
                <div class="flex space-bw">
                    <label for="">To:</label>
                    <input name="to_date" type="date" class="form_control">
                </div>
            
                <div class="flex space-bw">
                    <label for="" >Username:</label>
                    <select name="user_name" class="form_control flex">
                        <option value="">MANAV100</option>
                    </select>
                </div>
                <div class="flex space-bw">
                    <label for="">Username:</label>
                    <select class="form_control">
                    </select>
                </div>
                <div class="flex1 row">
                    <div class="mr flex">
                    
                        <input type="checkbox" name="p_and_l" id="pandlID" class="unset mb-0">
                        <p style="font-size: 14px; margin-right: 5px;">P/L</p>
                    </div>
                    <div class="mr flex">
                        <input type="checkbox" name="brk" id="brkId" class="unset mb-0">
                        <p style="font-size: 14px; margin-right: 5px;">Brk</p>
                    </div>
                    <div class="mr flex">
                        <input type="checkbox" name="credit" id="creditCheckBoxId" class="unset mb-0">
                        <p style="font-size: 14px; margin-right: 5px;">Credit</p>
                    </div>
                </div>
                <div style="display: flex;" >
                    <input type="submit" value="View" class="form-btn mr" style="border: 1px solid white;">
                    <input type="submit" value="Clear" class="cancel-btn" style="border: 1px solid white;">
                </div>
            </div>
        </form>
    </div>    
    
     <div class="trades-body user-table ">
         <div class="pos-relate">
    {% if account_summary %}
         <table style="width: 100%;">
             <tr>
                 <th>Date</th>
                 <th>Username</th>
                 <th>Particular</th>
                 <th>Qty</th>
                 <th>Buy/Sell</th>
                 <th>Price</th>
                 <th>Average Price</th>
                 <th>Type</th>
                 <th>Amount</th>
                </tr>
                {% for i in account_summary %}
                <tr>
                    <td>{{i.created_at}}</td>
                    <td>{{i.user_summary__user_name}}</td>
                    <td>{{i.particular}}</td>
                    <td>{{i.quantity}}</td>
                    <td>{{i.buy_sell_type}}</td>
                    <td>{{i.price}}</td>
                    <td>{{i.average|floatformat:2}}</td>
                    <td>{{i.summary_flg}}</td>
                    {% if i.amount > 0 %}
                    <td style="color: blue;">{{i.amount|floatformat:2}}</td>
                    {% else %}
                    <td style="color: red;">{{i.amount|floatformat:2}}</td>
                    {% endif %}

                </tr>
                {% endfor %}
         </table>
         {% else %}
         <div style="display: flex;justify-content: center;margin-top: 14%;">
           <p>No data found</p>
         </div>
     {% endif %}
     </div>
     </div>
    </div>
</div>

<script>
    $(document).ready(function() {
        $('#pandlID, #brkId').change(function() {
          if ($(this).is(':checked')) {
            $('#creditCheckBoxId').prop('checked', false);
          }
        });
        $('#creditCheckBoxId').change(function() {
          if ($(this).is(':checked')) {
            $('#pandlID, #brkId').prop('checked', false);
          }
        });
      });
    
</script>
{% endblock newtab %}
